# Проект спринта "Аналитические базы данных"

## Описание
Даг в проекте выполняет загрузку csv файла с S3 хранилища Яндекса и заполняет таблицу в слое staging данными из файла.

Далее с момщью DDL и DML запросов выполняется создание таблиц в слое DWH, запполнение этих таблиц и итог - создаем CTE для бизнеса.

## Структура репозитория

- `/src/dags` - список дагов
- `/src/sql` - список DDL и SQL запросов

### Описание файлов

- `project_ddl.sql` - создание таблиц для реализации проекта
- `project_insert.sql` - заполнение таблиц проекта данными из staging
- `project_business_cte.sql` - сам запрос для решения задачи бизнеса

## Проблемы
Столкнулся с проблемой кривых данных в исходных файлах на S3. Есть списки пользователей и групп, есть файлы с данными - members, gialogs, group_log. В данных могут присутствовать пользователи и группы, которых нет в списках, либо, например группы не заданы вообще.
Так как в задании не прописано решить данную проблему, сделал исключение. Как вариант - вместо LEFT JOIN использовать INNER или WHERE field IS NOT null. Data Vault 2.0 позволяет решать подобные проблемы, когда есть данные(факты) и нет справочников, но перед нами такой задачи не было.
